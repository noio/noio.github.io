<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="google-site-verification" content="GczuurekKRrnQbnvMKZe8V37yWH66ZewOF86uJfN27I" />
    <meta name="viewport" content="width=device-width">
    <link rel="alternate" type="application/rss+xml" title="noio" href="http://www.noio.nl/feed.xml">
    <link rel="stylesheet" href="https://use.typekit.net/atq8emw.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <link rel="shortcut icon" href="http://www.gravatar.com/avatar/b667dff85b9fc0286902b8e6adff8b90.png?size=32" />
    <style>
        body {
            max-width: 800px;
            margin: auto;
            font-family: 'effra', sans-serif;
            font-weight: 400;
            font-size: 20px;
            line-height: 32px;
            padding-bottom: 100px;
        }

        li {
            margin: 8px 0;
        }

        img {
            max-width: 100%;
        }

        .logo>a{
            border-bottom: 3px solid blue;
        }

        .tag {
            font-weight: 300;
        }

        blockquote {
            border-left: 4px solid #666;
            margin-left: 0;
            padding-left: 1em;
            color: #666;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0px;
            width: 100%;
            overflow: auto;
            break-inside: auto;
            text-align: left;
            padding: 0;
            word-break: initial;
        }

        table tr {
            border-top: 1px solid #dfe2e5;
            margin: 0;
            padding: 0;
        }

        table tr:nth-child(2n),
        thead {
            background-color: #f8f8f8;
        }

        table tr th {
            font-weight: bold;
            border: 1px solid #dfe2e5;
            border-bottom: 0;
            text-align: left;
            margin: 0;
            padding: 6px 13px;
        }

        table tr td {
            border: 1px solid #dfe2e5;
            text-align: left;
            margin: 0;
            padding: 6px 13px;
        }

        table tr th:first-child,
        table tr td:first-child {
            margin-top: 0;
        }

        table tr th:last-child,
        table tr td:last-child {
            margin-bottom: 0;
        }
    </style>
</head>

<body>
    <h1 class="logo"><a href="/"><img alt="noio" src="/assets/_site/noio.png"></a></h1>
    <br/>
    <div>
        <div class="post">
  <h1>Stacking More Boxes in Unity</h1>
  <p>Resuming the research from my previous post. I'm examining the influence of some more parameters on the stability of a stack of boxes.</p>
<h2>Compound Colliders</h2>
<p>First thing I tried is the influence of using boxes that are composed of multiple box colliders (on the same <em>GameObject</em>). I thought that this setup might be making things worse.</p>
<p><img src="/assets/2018-11-21-stacking-more-boxes/compound-colliders.png" alt="compound-colliders"></p>
<p>The image shows the difference between a box made up of compound colliders (left) and a single box collider of the same size (right).</p>
<p><img src="/assets/2018-11-21-stacking-more-boxes/compound-colliders-stacking.png" alt="compound-colliders-stacking"></p>
<p>So it turns out that the difference is negligible. That makes sense if you realize that the physics engine is probably processing the same contacts since the boxes are still all axis-aligned. The only cost is in computations, because there are 5 times as many (in my example) box colliders to deal with. I did see about a 20% increase in the time spent on the physics step.</p>
<h2>Stacking One-by-One</h2>
<p>I saw that a stack of boxes immediately compresses after spawning, and then bounces back up as all the penetrations are solved. So I figured that perhaps placing the boxes one by one and letting the stack come to rest before spawning another block might help.</p>
<p><img src="/assets/2018-11-21-stacking-more-boxes/bouncy-stack.gif" alt="bouncy-stack"></p>
<p>The image above shows the bounce resulting from creating a stack all at once.</p>
<p><img src="/assets/2018-11-21-stacking-more-boxes/one-by-one.gif" alt="one-by-one"></p>
<p>By spawning the boxes one-by-one as you see above I was hoping to reduce the bounciness.</p>
<p>The boxes bounce less, but the overall effect on stability? Negligible.</p>
<p><img src="/assets/2018-11-21-stacking-more-boxes/one-by-one-results.png" alt="one-by-one-results"></p>
<p>What that means is that the instability comes from the physics computation intrinsically, and not from the initial setup. Which you can see as good or bad news, depending on what you want to do.</p>
<h2>Lessons so far</h2>
<p>What I am coming to realize with these experiments is that aside from the number of solver steps, there are not many things that severely impact the stability of a stack of boxes. My session of randomly tweaking different parameters to get things working was ineffective because the physics engine is pretty stable in its instability ;)</p>
<p>I have a good idea now of how much I should expect from the physics engine, and how much I will need to fix with more game-specific mechanisms for stabilization.</p>
<p>Get the code at https://github.com/noio/box-stacking-stability to to run your own experiment.</p>

</div>
    </div>
</body>

</html>